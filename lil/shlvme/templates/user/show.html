{% extends "layouts/base.html" %}

{% block content %}
	<article class="two-thirds user">
		<aside>
			{% include "partials/user-widget.html" %}
		</aside>

		<div class="content">
			<h1>Shelves
				<a href="#new-shelf" title="New Shelf" class="button positive immediate">+</a>
			</h1>
			
			{% for shelf in docs %}
				{% include "partials/shelf-overview.html" %}
			{% empty %}
				<p class="empty">You don't have any shelves yet.</p>
			{% endfor %}

			{% if is_owner %}
				{% include "partials/new-shelf-form.html" %}
			{% endif %}
		</div>
	</article>
{% endblock content %}

{% block templates %}
	{% include "clientside/edit-shelf-form.html" %}
{% endblock templates %}

{% block scripts %}
{{ block.super }}
<script type="text/javascript">
	$('input[name=name]').on('propertychange keyup input paste', function() {
		// Show the user what the url of the shelfname will be
		var shelfname = $(this).val()
		var slugged_shelfname = shelfname.replace(/\s+/g,'-').replace(/[^a-zA-Z0-9\-]/g,'').toLowerCase();
    	$(this).prev().html('http://shlv.me/' + $('.icon-user').html() + '/' + slugged_shelfname);
 	});
</script>
{% endblock scripts %}
{% block extrascripts %}
  <script src="{{ STATIC_PREFIX }}script/shlvme.js"></script>
{% endblock extrascripts %}